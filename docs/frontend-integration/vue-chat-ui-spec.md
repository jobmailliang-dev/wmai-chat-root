# Vue èŠå¤©çª—å£ UI è§„èŒƒæ–‡æ¡£

> **æ–‡æ¡£ç‰ˆæœ¬**ï¼š1.0.0
> **é€‚ç”¨é¡¹ç›®**ï¼šLLM CLI Demo V4
> **å‰ç«¯æ¡†æ¶**ï¼šVue 3 + TypeScript
> **æœ€åæ›´æ–°**ï¼š2026-02-03

---

## ç›®å½•

1. [è®¾è®¡åŸåˆ™ä¸è§„èŒƒ](#1-è®¾è®¡åŸåˆ™ä¸è§„èŒƒ)
2. [ç»„ä»¶è®¾è®¡è§„èŒƒ](#2-ç»„ä»¶è®¾è®¡è§„èŒƒ)
3. [é¢œè‰²ä¸æ’ç‰ˆè§„èŒƒ](#3-é¢œè‰²ä¸æ’ç‰ˆè§„èŒƒ)
4. [äº¤äº’è§„èŒƒ](#4-äº¤äº’è§„èŒƒ)
5. [å“åº”å¼è®¾è®¡è¦æ±‚](#5-å“åº”å¼è®¾è®¡è¦æ±‚)
6. [å¯è®¿é—®æ€§è¦æ±‚](#6-å¯è®¿é—®æ€§è¦æ±‚)
7. [é™„å½•](#7-é™„å½•)

---

## 1. è®¾è®¡åŸåˆ™ä¸è§„èŒƒ

### 1.1 æ ¸å¿ƒè®¾è®¡åŸåˆ™

æœ¬èŠå¤©çª—å£ UI è®¾è®¡éµå¾ªä»¥ä¸‹æ ¸å¿ƒåŸåˆ™ï¼Œç¡®ä¿ç”¨æˆ·è·å¾—ç›´è§‚ã€é«˜æ•ˆçš„äº¤äº’ä½“éªŒï¼š

| åŸåˆ™ | æè¿° | åº”ç”¨åœºæ™¯ |
|------|------|----------|
| **å†…å®¹å¯è§æ€§** | AI å›å¤å†…å®¹ç´¯ç§¯æ˜¾ç¤ºï¼Œä¸è¢«ä¸­æ–­ | æµå¼å“åº”è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·å§‹ç»ˆå¯ä»¥çœ‹åˆ°å®Œæ•´å›å¤ |
| **çŠ¶æ€é€æ˜æ€§** | thinking çŠ¶æ€ç‹¬ç«‹æ˜¾ç¤ºè°ƒè¯•æ—¥å¿— | å¼€å‘è°ƒè¯•æ—¶æ¸…æ™°è¿½è¸ª AI æ€è€ƒè¿‡ç¨‹ |
| **äº¤äº’æµç•…æ€§** | Content ä¸ Thinking åŒºåŸŸå¹¶è¡Œå­˜åœ¨ | å¤šè½®å·¥å…·è°ƒç”¨æ—¶ä¿æŒæµç•…çš„ç”¨æˆ·ä½“éªŒ |
| **å³æ—¶åé¦ˆ** | æ‰“å­—æœºæ•ˆæœ + æ€è€ƒæŒ‡ç¤ºå™¨ | è®©ç”¨æˆ·æ„ŸçŸ¥åˆ° AI æ­£åœ¨å“åº” |

### 1.2 å†…å®¹ç´¯ç§¯ç­–ç•¥

**æ ¸å¿ƒè§„åˆ™**ï¼šContent åŒºåŸŸå†…å®¹**ç´¯ç§¯ä¸æ¸…ç©º**ï¼ŒThinking åŒºåŸŸç‹¬ç«‹æ˜¾ç¤ºè°ƒè¯•æ—¥å¿—ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  äº‹ä»¶ç±»å‹        â”‚ Content åŒºåŸŸ              â”‚ Thinking åŒºåŸŸ          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  content        â”‚ ç´¯ç§¯è¿½åŠ ï¼Œä¸æ¸…ç©º           â”‚ éšè—ï¼ˆè‹¥ä¹‹å‰æ˜¾ç¤ºï¼‰      â”‚
â”‚  thinking       â”‚ ä¿æŒä¸å˜                  â”‚ æ˜¾ç¤ºæ—¥å¿—               â”‚
â”‚  tool_call      â”‚ ä¿æŒä¸å˜                  â”‚ è¿½åŠ æ—¥å¿—               â”‚
â”‚  tool_result    â”‚ ä¿æŒä¸å˜                  â”‚ è¿½åŠ æ—¥å¿—               â”‚
â”‚  tool_error     â”‚ ä¿æŒç´¯ç§¯                  â”‚ è¿½åŠ é”™è¯¯æ—¥å¿—           â”‚
â”‚  done           â”‚ ä¿æŒæœ€ç»ˆç»“æœ              â”‚ éšè—                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è®¾è®¡ç†ç”±**ï¼š
- å¤šè½®å·¥å…·è°ƒç”¨æ—¶ï¼Œcontent å†…å®¹ä¸ä¼šä¸¢å¤±
- ç”¨æˆ·å¯ä»¥åŒæ—¶çœ‹åˆ° AI å›å¤å’Œè°ƒè¯•ä¿¡æ¯
- é¿å…å› çŠ¶æ€åˆ‡æ¢å¯¼è‡´çš„è§†è§‰è·³è·ƒ

### 1.3 è§†è§‰å±‚æ¬¡ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ChatWindow (ä¸»å®¹å™¨)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      ChatHeader (å¤´éƒ¨)                     â”‚  â”‚
â”‚  â”‚  [æ ‡é¢˜] [çŠ¶æ€æŒ‡ç¤ºå™¨] [æ¸…ç©ºå¯¹è¯æŒ‰é’®]                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    MessageList (æ¶ˆæ¯åˆ—è¡¨)                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Message (å•æ¡æ¶ˆæ¯ - ç”¨æˆ·å³ä¾§å¯¹é½)                    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Message (å•æ¡æ¶ˆæ¯ - AI å·¦ä¾§å¯¹é½)                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚            Content åŒºåŸŸ (å›å¤å†…å®¹)             â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚           Thinking åŒºåŸŸ (è°ƒè¯•æ—¥å¿—)             â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      ChatInput (è¾“å…¥åŒºåŸŸ)                  â”‚  â”‚
â”‚  â”‚  [æ–‡æœ¬åŸŸ] [å‘é€æŒ‰é’®]                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ç»„ä»¶è®¾è®¡è§„èŒƒ

### 2.1 ç»„ä»¶æ¶æ„

```
src/
  components/
    ChatWindow.vue      # ä¸»å®¹å™¨ç»„ä»¶
    MessageList.vue     # æ¶ˆæ¯åˆ—è¡¨å®¹å™¨
    MessageItem.vue     # å•æ¡æ¶ˆæ¯ç»„ä»¶
    ChatInput.vue       # è¾“å…¥ç»„ä»¶
    ThinkingArea.vue    # æ€è€ƒåŒºåŸŸç»„ä»¶ï¼ˆå¯é€‰æ‹†åˆ†ï¼‰
  hooks/
    useChat.ts          # èŠå¤©é€»è¾‘ Hook
    useAutoScroll.ts    # è‡ªåŠ¨æ»šåŠ¨ Hook
```

### 2.2 ChatWindow ç»„ä»¶è§„èŒƒ

**èŒè´£**ï¼šä½œä¸ºèŠå¤©çª—å£çš„ä¸»å®¹å™¨ï¼Œåè°ƒå„å­ç»„ä»¶çš„å±•ç¤ºã€‚

**å¸ƒå±€ç»“æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatHeader (56px)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MessageList (flex: 1, overflow-y: auto)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ChatInput (å›ºå®šé«˜åº¦ï¼Œåº•éƒ¨å®šä½)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å±æ€§ï¼ˆPropsï¼‰**ï¼š
```typescript
interface ChatWindowProps {
  baseUrl?: string;      // åç«¯ API åœ°å€ï¼Œé»˜è®¤ 'http://localhost:8000'
  title?: string;        // æ ‡é¢˜æ–‡æœ¬ï¼Œé»˜è®¤ 'AI åŠ©æ‰‹'
  showDebugLog?: boolean; // æ˜¯å¦æ˜¾ç¤ºè°ƒè¯•æ—¥å¿—ï¼Œé»˜è®¤å¼€å‘ç¯å¢ƒä¸º true
}
```

**çŠ¶æ€ï¼ˆStateï¼‰**ï¼š
```typescript
interface ChatState {
  isLoading: boolean;    // æ˜¯å¦åŠ è½½ä¸­
  isStreaming: boolean;  // æ˜¯å¦æµå¼å“åº”ä¸­
  error: string | null;  // é”™è¯¯ä¿¡æ¯
}
```

**äº‹ä»¶ï¼ˆEmitsï¼‰**ï¼š
| äº‹ä»¶å | å‚æ•° | æè¿° |
|--------|------|------|
| clear | - | æ¸…ç©ºå¯¹è¯æŒ‰é’®ç‚¹å‡» |
| error | message: string | å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ |

### 2.3 MessageList ç»„ä»¶è§„èŒƒ

**èŒè´£**ï¼šæ¸²æŸ“æ¶ˆæ¯åˆ—è¡¨ï¼Œæ”¯æŒè‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨ã€‚

**å¸ƒå±€è¦æ±‚**ï¼š
- `flex: 1` å¡«å……å‰©ä½™ç©ºé—´
- `overflow-y: auto` æ”¯æŒå‚ç›´æ»šåŠ¨
- `padding: 16px` å†…è¾¹è·

**è‡ªåŠ¨æ»šåŠ¨è§„åˆ™**ï¼š
```typescript
// å½“æ¶ˆæ¯æ•°é‡å¢åŠ æ—¶ï¼Œè‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
watch(
  () => props.messages.length,
  () => {
    nextTick(() => {
      containerRef.value.scrollTop = containerRef.value.scrollHeight;
    });
  }
);
```

### 2.4 MessageItem ç»„ä»¶è§„èŒƒ

**èŒè´£**ï¼šæ¸²æŸ“å•æ¡æ¶ˆæ¯ï¼Œæ ¹æ®è§’è‰²ï¼ˆuser/assistantï¼‰æ˜¾ç¤ºä¸åŒæ ·å¼ã€‚

**å¸ƒå±€ç»“æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·æ¶ˆæ¯ (å³ä¾§å¯¹é½)                                       â”‚
â”‚  +---------------------------------------------------+  â”‚
â”‚  | æ¶ˆæ¯å†…å®¹æ°”æ³¡ (è“è‰²èƒŒæ™¯ï¼Œç™½è‰²æ–‡å­—)                   |  â”‚
â”‚  +---------------------------------------------------+  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ AI æ¶ˆæ¯ (å·¦ä¾§å¯¹é½)                                      â”‚
â”‚  +---------------------------------------------------+  â”‚
â”‚  | Content åŒºåŸŸ (ç°è‰²èƒŒæ™¯ï¼Œé»‘è‰²æ–‡å­—)                   |  â”‚
â”‚  +---------------------------------------------------+  â”‚
â”‚  | Thinking åŒºåŸŸ (æ·±è‰²èƒŒæ™¯ï¼Œè°ƒè¯•æ—¥å¿—)                  |  â”‚
â”‚  +---------------------------------------------------+  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ¶ˆæ¯æ•°æ®ç»“æ„**ï¼š
```typescript
interface Message {
  id: string;                    // å”¯ä¸€æ ‡è¯†
  role: 'user' | 'assistant';    // è§’è‰²
  content: string;               // å›å¤å†…å®¹
  timestamp: number;             // æ—¶é—´æˆ³
  isThinking: boolean;           // æ˜¯å¦æ€è€ƒä¸­
  thinkingLog: ThinkingLog[];    // æ€è€ƒæ—¥å¿—
}

interface ThinkingLog {
  timestamp: number;      // äº‹ä»¶æ—¶é—´æˆ³
  eventType: string;      // äº‹ä»¶ç±»å‹
  rawData: string;        // åŸå§‹æ•°æ®
}
```

### 2.5 ChatInput ç»„ä»¶è§„èŒƒ

**èŒè´£**ï¼šå¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œæ”¯æŒ Enter å‘é€å’Œè‡ªåŠ¨è°ƒæ•´é«˜åº¦ã€‚

**å¸ƒå±€ç»“æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [æ–‡æœ¬åŸŸ - è‡ªåŠ¨è°ƒæ•´é«˜åº¦ï¼Œæœ€å¤§ 120px] [å‘é€æŒ‰é’® - åœ†å½¢]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**äº¤äº’è§„åˆ™**ï¼š
- Enter é”®å‘é€æ¶ˆæ¯ï¼ˆé˜»æ­¢é»˜è®¤æ¢è¡Œè¡Œä¸ºï¼‰
- Shift + Enter å…è®¸æ¢è¡Œ
- å‘é€åè‡ªåŠ¨æ¸…ç©ºè¾“å…¥æ¡†
- ç¦ç”¨çŠ¶æ€ä¸‹ä¸å¯äº¤äº’

**è‡ªåŠ¨è°ƒæ•´é«˜åº¦é€»è¾‘**ï¼š
```typescript
watch(inputMessage, () => {
  if (textareaRef.value) {
    textareaRef.value.style.height = 'auto';
    textareaRef.value.style.height = Math.min(textareaRef.value.scrollHeight, 120) + 'px';
  }
});
```

### 2.6 ThinkingArea ç»„ä»¶è§„èŒƒ

**èŒè´£**ï¼šæ¸²æŸ“ AI æ€è€ƒè¿‡ç¨‹çš„è°ƒè¯•æ—¥å¿—ã€‚

**å¸ƒå±€è¦æ±‚**ï¼š
- å›ºå®šé«˜åº¦ 120px
- `overflow-y: auto` æ”¯æŒæ»šåŠ¨
- æ·±è‰²èƒŒæ™¯ (#1e1e2e) åŒºåˆ†äºä¸»å†…å®¹åŒº

**æ—¥å¿—é¡¹ç»“æ„**ï¼š
```
[æ—¶é—´æˆ³] [äº‹ä»¶ç±»å‹]
{
  "åŸå§‹æ•°æ® JSON"
}
```

---

## 3. é¢œè‰²ä¸æ’ç‰ˆè§„èŒƒ

### 3.1 é¢œè‰²ç³»ç»Ÿ

#### 3.1.1 ä¸»è‰²æ¿

| è§’è‰² | é¢œè‰²å€¼ | ç”¨é€” |
|------|--------|------|
| ç”¨æˆ·æ¶ˆæ¯èƒŒæ™¯ | `#007aff` | æ¶ˆæ¯æ°”æ³¡èƒŒæ™¯ |
| ç”¨æˆ·æ¶ˆæ¯æ–‡å­— | `#ffffff` | æ¶ˆæ¯æ°”æ³¡æ–‡å­— |
| AI æ¶ˆæ¯èƒŒæ™¯ | `#f0f0f0` | Content åŒºåŸŸèƒŒæ™¯ |
| AI æ¶ˆæ¯æ–‡å­— | `#333333` | Content åŒºåŸŸæ–‡å­— |
| æ€è€ƒåŒºåŸŸèƒŒæ™¯ | `#1e1e2e` | Thinking åŒºåŸŸæ·±è‰²èƒŒæ™¯ |
| æ€è€ƒåŒºåŸŸæ–‡å­— | `#a6accd` | Thinking åŒºåŸŸä¸»æ–‡å­— |
| äº‹ä»¶ç±»å‹é«˜äº® | `#89b4fa` | æ—¥å¿—äº‹ä»¶ç±»å‹ |
| æ—¶é—´æˆ³é¢œè‰² | `#6c7086` | æ—¥å¿—æ—¶é—´æˆ³ |
| JSON æ•°æ®èƒŒæ™¯ | `#1a1a2e` | JSON æ•°æ®å—èƒŒæ™¯ |
| JSON æ•°æ®æ–‡å­— | `#a6adc8` | JSON æ•°æ®æ–‡å­— |

#### 3.1.2 çŠ¶æ€é¢œè‰²

| çŠ¶æ€ | é¢œè‰²å€¼ | ç”¨é€” |
|------|--------|------|
| å°±ç»ªçŠ¶æ€ | `#cccccc` | çŠ¶æ€æŒ‡ç¤ºç‚¹ |
| è¿æ¥ä¸­/æ€è€ƒä¸­ | `#4caf50` | çŠ¶æ€æŒ‡ç¤ºç‚¹ + è„‰å†²åŠ¨ç”» |
| åŠ è½½ä¸­ | `#ff9800` | æ€è€ƒä¸­çŠ¶æ€æ–‡å­— |
| é”™è¯¯ | `#ff4444` | é”™è¯¯æç¤ºèƒŒæ™¯ |
| è¾¹æ¡†/åˆ†éš”çº¿ | `#e0e0e0` | åˆ†éš”çº¿é¢œè‰² |

#### 3.1.3 Thinking åŒºåŸŸè‰²æ¿

| å…ƒç´  | é¢œè‰²å€¼ | ç”¨é€” |
|------|--------|------|
| å¤´éƒ¨èƒŒæ™¯ | `#2d2d3d` | Thinking åŒºåŸŸå¤´éƒ¨ |
| æ—¥å¿—é¡¹èƒŒæ™¯ | `#252535` | å•æ¡æ—¥å¿—èƒŒæ™¯ |
| è¾¹æ¡†è‰² | `#3d3d4d` | ç»„ä»¶è¾¹æ¡† |

### 3.2 æ’ç‰ˆç³»ç»Ÿ

#### 3.2.1 å­—ä½“è§„èŒƒ

| å…ƒç´  | å­—ä½“å®¶æ— | å­—å· | å­—é‡ | è¡Œé«˜ |
|------|----------|------|------|------|
| æ ‡é¢˜ (h2) | System UI | 18px | 600 | 1.4 |
| æ¶ˆæ¯å†…å®¹ | System UI | 14px | 400 | 1.6 |
| æ—¥å¿—æ—¶é—´æˆ³ | System UI | 11px | 400 | 1.5 |
| æ—¥å¿—äº‹ä»¶ç±»å‹ | System UI | 11px | 500 | 1.5 |
| JSON æ•°æ® | Monaco/Menlo | 10px | 400 | 1.5 |
| å ä½ç¬¦/æç¤ºæ–‡å­— | System UI | 13px | 400 | 1.5 |
| è¾“å…¥æ¡†æ–‡å­— | System UI | 14px | 400 | 1.5 |
| æŒ‰é’®æ–‡å­— | System UI | 13px | 400 | 1.4 |

#### 3.2.2 å­—ä½“ä¼˜å…ˆçº§

```css
font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
```

### 3.3 é—´è·è§„èŒƒ

#### 3.3.1 é—´è·ç³»ç»Ÿ

| é—´è·çº§åˆ« | åƒç´ å€¼ | ä½¿ç”¨åœºæ™¯ |
|----------|--------|----------|
| xs | 4px | å›¾æ ‡ä¸æ–‡å­—é—´è· |
| sm | 6px | æ—¥å¿—é¡¹å†…è¾¹è· |
| md | 8px | ç»„ä»¶é—´è· |
| lg | 12px | æ¶ˆæ¯é—´è· |
| xl | 16px | å®¹å™¨å†…è¾¹è· |
| 2xl | 24px | åŒºå—é—´è· |

#### 3.3.2 å…·ä½“åº”ç”¨

```css
/* æ¶ˆæ¯åˆ—è¡¨ */
.message-list {
  padding: 16px;           /* xl */
}

.message {
  margin-bottom: 16px;     /* xl */
}

/* æ¶ˆæ¯æ°”æ³¡ */
.message-content {
  padding: 12px 16px;      /* lg - å†…éƒ¨ */
}

/* Thinking åŒºåŸŸ */
.thinking-header {
  padding: 8px 12px;       /* md - sm */
}

.thinking-log {
  padding: 8px;            /* md */
}

.log-item {
  padding: 6px 8px;        /* sm */
  margin-bottom: 4px;      /* xs */
}

/* è¾“å…¥åŒºåŸŸ */
.chat-input {
  padding: 16px;           /* xl */
}

.input-container {
  padding: 8px 12px;       /* md - sm */
  border-radius: 24px;
}

.log-data {
  margin: 6px 0 0 0;       /* sm */
  padding: 6px;            /* sm */
}
```

### 3.4 åœ†è§’è§„èŒƒ

| å…ƒç´  | åœ†è§’å€¼ | è¯´æ˜ |
|------|--------|------|
| æ¶ˆæ¯æ°”æ³¡ | 12px | ç”¨æˆ·å’Œ AI æ¶ˆæ¯æ°”æ³¡ |
| Thinking åŒºåŸŸ | 8px | è°ƒè¯•æ—¥å¿—å®¹å™¨ |
| æ—¥å¿—é¡¹ | 4px | å•æ¡æ—¥å¿—èƒŒæ™¯ |
| è¾“å…¥å®¹å™¨ | 24px | åœ†è§’è¾“å…¥æ¡† |
| å‘é€æŒ‰é’® | 50% | åœ†å½¢æŒ‰é’® |
| é”™è¯¯æç¤º | 8px | é”™è¯¯ toast |

---

## 4. äº¤äº’è§„èŒƒ

### 4.1 æ¶ˆæ¯å‘é€æµç¨‹

```
ç”¨æˆ·è¾“å…¥ â†’ éªŒè¯ â†’ å‘é€è¯·æ±‚ â†’ SSE æµå¼æ¥æ”¶ â†’ æ¸²æŸ“å“åº” â†’ å®Œæˆ

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤ 1: ç”¨æˆ·è¾“å…¥                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ è¾“å…¥æ¡†è·å–ç„¦ç‚¹ï¼Œè¾“å…¥æ–‡å­—                                   â”‚   â”‚
â”‚  â”‚ è‡ªåŠ¨è°ƒæ•´é«˜åº¦ (æœ€å¤§ 120px)                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“                                    â”‚
â”‚  æ­¥éª¤ 2: éªŒè¯                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ£€æŸ¥ï¼šå†…å®¹éç©º && æœªåŠ è½½ && æœªæµå¼å“åº”                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“                                    â”‚
â”‚  æ­¥éª¤ 3: å‘é€è¯·æ±‚                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ POST /chat/stream?message=URL_ENCODED                    â”‚   â”‚
â”‚  â”‚ æ·»åŠ ç”¨æˆ·æ¶ˆæ¯åˆ°åˆ—è¡¨                                        â”‚   â”‚
â”‚  â”‚ åˆ›å»º AI æ¶ˆæ¯å ä½ç¬¦                                        â”‚   â”‚
â”‚  â”‚ è®¾ç½® isLoading = true                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“                                    â”‚
â”‚  æ­¥éª¤ 4: SSE äº‹ä»¶å¤„ç†                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ content äº‹ä»¶ â†’ ç´¯ç§¯åˆ° message.content                    â”‚   â”‚
â”‚  â”‚ thinking äº‹ä»¶ â†’ æ˜¾ç¤º thinking åŒºåŸŸ                       â”‚   â”‚
â”‚  â”‚ tool_call äº‹ä»¶ â†’ è®°å½•æ—¥å¿—ï¼Œä¿æŒ thinking çŠ¶æ€            â”‚   â”‚
â”‚  â”‚ tool_result äº‹ä»¶ â†’ è®°å½•æ—¥å¿—ï¼Œä¿æŒ thinking çŠ¶æ€          â”‚   â”‚
â”‚  â”‚ done äº‹ä»¶ â†’ éšè— thinking åŒºåŸŸï¼Œå“åº”å®Œæˆ                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“                                    â”‚
â”‚  æ­¥éª¤ 5: æ¸²æŸ“æ›´æ–°                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ è‡ªåŠ¨æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯                                        â”‚   â”‚
â”‚  â”‚ æ›´æ–°çŠ¶æ€æŒ‡ç¤ºå™¨                                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 çŠ¶æ€æµè½¬

```mermaid
stateDiagram-v2
    [*] --> ç©ºé—²

    ç©ºé—² --> å›å¤ä¸­: ç”¨æˆ·å‘é€æ¶ˆæ¯
    å›å¤ä¸­ --> æ€è€ƒä¸­: æ”¶åˆ° thinking/tool_call/tool_result/tool_error äº‹ä»¶

    æ€è€ƒä¸­ --> å›å¤ä¸­: æ”¶åˆ° content äº‹ä»¶ï¼ˆcontent ç´¯ç§¯ä¸æ¸…ç©ºï¼‰

    å›å¤ä¸­ --> å®Œæˆ: æ”¶åˆ° done äº‹ä»¶
    æ€è€ƒä¸­ --> å®Œæˆ: æ”¶åˆ° done äº‹ä»¶

    å®Œæˆ --> ç©ºé—²: ç”¨æˆ·å†æ¬¡å‘é€æ¶ˆæ¯

    å›å¤ä¸­ --> é”™è¯¯: æ”¶åˆ° error äº‹ä»¶
    æ€è€ƒä¸­ --> é”™è¯¯: æ”¶åˆ° error äº‹ä»¶
```

### 4.3 äº¤äº’è§„åˆ™

#### 4.3.1 é”®ç›˜äº¤äº’

| é”®ä½ | åŠŸèƒ½ | æ¡ä»¶ |
|------|------|------|
| Enter | å‘é€æ¶ˆæ¯ | è¾“å…¥æ¡†èšç„¦ï¼Œå†…å®¹éç©º |
| Shift + Enter | æ¢è¡Œ | è¾“å…¥æ¡†èšç„¦ |
| Escape | å…³é—­é”™è¯¯æç¤º | é”™è¯¯æç¤ºæ˜¾ç¤ºä¸­ |

#### 4.3.2 é¼ æ ‡äº¤äº’

| å…ƒç´  | äº¤äº’ | åé¦ˆ |
|------|------|------|
| å‘é€æŒ‰é’® | ç‚¹å‡» | å‘é€æ¶ˆæ¯æˆ–åœæ­¢æµå¼å“åº” |
| æ¸…ç©ºå¯¹è¯æŒ‰é’® | ç‚¹å‡» | å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡† |
| æ€è€ƒæ—¥å¿—æŠ˜å  | ç‚¹å‡» | å±•å¼€/æ”¶èµ·è°ƒè¯•æ—¥å¿— |
| é”™è¯¯æç¤ºå…³é—­ | ç‚¹å‡» | å…³é—­é”™è¯¯æç¤º |

#### 4.3.3 æµå¼å“åº”çŠ¶æ€

```typescript
// çŠ¶æ€åˆ¤æ–­é€»è¾‘
const getStatusText = () => {
  if (state.isStreaming) return 'æ€è€ƒä¸­...';
  if (state.isLoading) return 'åŠ è½½ä¸­...';
  return 'å°±ç»ª';
};

// å‘é€æŒ‰é’®å›¾æ ‡åˆ‡æ¢
const sendButtonContent = computed(() => {
  return state.isStreaming ? 'â¹' : 'â¤';
});
```

### 4.4 åŠ¨ç”»æ•ˆæœ

#### 4.4.1 æ€è€ƒæŒ‡ç¤ºå™¨åŠ¨ç”»

```css
@keyframes bounce {
  0%, 80%, 100% {
    transform: scale(0);
  }
  40% {
    transform: scale(1);
  }
}

.typing-indicator .dot:nth-child(1) { animation-delay: 0s; }
.typing-indicator .dot:nth-child(2) { animation-delay: 0.2s; }
.typing-indicator .dot:nth-child(3) { animation-delay: 0.4s; }
```

#### 4.4.2 çŠ¶æ€æŒ‡ç¤ºå™¨è„‰å†²

```css
@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.status-dot {
  animation: pulse 1.5s infinite;
}
```

#### 4.4.3 æŠ˜å ç®­å¤´æ—‹è½¬

```css
.thinking-collapsed summary::before {
  transition: transform 0.2s;
}

.thinking-collapsed details[open] summary::before {
  transform: rotate(90deg);
}
```

---

## 5. å“åº”å¼è®¾è®¡è¦æ±‚

### 5.1 æ–­ç‚¹å®šä¹‰

| æ–­ç‚¹ | å±å¹•å®½åº¦ | å¸ƒå±€å˜åŒ– |
|------|----------|----------|
| mobile | < 600px | å…¨å®½å¸ƒå±€ï¼Œè¾“å…¥æ¡†å•è¡Œ |
| tablet | 600px - 900px | æœ‰é™å®½åº¦ï¼Œæ¶ˆæ¯æ°”æ³¡è‡ªé€‚åº” |
| desktop | >= 900px | å›ºå®šæœ€å¤§å®½åº¦ 900pxï¼Œå±…ä¸­ |

### 5.2 å“åº”å¼è§„åˆ™

#### 5.2.1 ç§»åŠ¨ç«¯ (< 600px)

```css
@media (max-width: 600px) {
  .chat-window {
    height: 100vh;
    max-width: 100%;
  }

  .message-content {
    max-width: 90%;
  }

  .ai-message {
    max-width: 95%;
  }

  .chat-header {
    padding: 12px;
  }

  .chat-header h2 {
    font-size: 16px;
  }

  .thinking-area {
    /* ç§»åŠ¨ç«¯å‡å° thinking åŒºåŸŸé«˜åº¦ */
    max-height: 100px;
  }
}
```

#### 5.2.2 å¹³æ¿ç«¯ (600px - 900px)

```css
@media (min-width: 600px) and (max-width: 900px) {
  .chat-window {
    height: 100vh;
    max-width: 100%;
  }

  .message-content,
  .ai-message {
    max-width: 85%;
  }
}
```

#### 5.2.3 æ¡Œé¢ç«¯ (>= 900px)

```css
.chat-window {
  height: 100vh;
  max-width: 900px;
  margin: 0 auto;
}
```

### 5.3 çª—å£å°ºå¯¸é€‚é…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çª—å£å°ºå¯¸            â”‚ æ¶ˆæ¯æ°”æ³¡æœ€å¤§å®½åº¦     â”‚ è¾“å…¥æ¡†è¡Œä¸º          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å°çª—å£ (< 400px)    â”‚ 95%                  â”‚ å§‹ç»ˆå•è¡Œ           â”‚
â”‚  ä¸­ç­‰çª—å£ (400-600)  â”‚ 90%                  â”‚ æœ€å¤š 2 è¡Œ          â”‚
â”‚  å¤§çª—å£ (600-900)    â”‚ 85%                  â”‚ æœ€å¤š 3 è¡Œ          â”‚
â”‚  è¶…å¤§çª—å£ (> 900)    â”‚ 600px                â”‚ æœ€å¤š 5 è¡Œ          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.4 è¾“å…¥æ¡†é«˜åº¦å“åº”å¼

```typescript
// æ ¹æ®çª—å£å®½åº¦åŠ¨æ€è°ƒæ•´æœ€å¤§é«˜åº¦
const getMaxHeight = () => {
  const width = window.innerWidth;
  if (width < 600) return 80;   // ç§»åŠ¨ç«¯
  if (width < 900) return 100;  // å¹³æ¿
  return 120;                    // æ¡Œé¢
};

watch(inputMessage, () => {
  if (textareaRef.value) {
    textareaRef.value.style.height = 'auto';
    textareaRef.value.style.height = Math.min(
      textareaRef.value.scrollHeight,
      getMaxHeight()
    ) + 'px';
  }
});
```

---

## 6. å¯è®¿é—®æ€§è¦æ±‚

### 6.1 é¢œè‰²å¯¹æ¯”åº¦

#### 6.1.1 WCAG AA æ ‡å‡†

| å…ƒç´  | å‰æ™¯è‰² | èƒŒæ™¯è‰² | å¯¹æ¯”åº¦ | è¦æ±‚ |
|------|--------|--------|--------|------|
| ç”¨æˆ·æ¶ˆæ¯æ–‡å­— | `#ffffff` | `#007aff` | 4.5:1+ | æ»¡è¶³ AAA |
| AI æ¶ˆæ¯æ–‡å­— | `#333333` | `#f0f0f0` | 7.1:1 | æ»¡è¶³ AAA |
| æ€è€ƒåŒºåŸŸæ–‡å­— | `#a6accd` | `#1e1e2e` | 7.8:1 | æ»¡è¶³ AAA |
| æ—¥å¿—äº‹ä»¶ç±»å‹ | `#89b4fa` | `#252535` | 6.2:1 | æ»¡è¶³ AA |
| æ—¶é—´æˆ³ | `#6c7086` | `#1e1e2e` | 4.7:1 | æ»¡è¶³ AA |
| é”™è¯¯æç¤ºæ–‡å­— | `#ffffff` | `#ff4444` | 5.4:1 | æ»¡è¶³ AA |
| å ä½ç¬¦æ–‡å­— | `#999999` | `#f5f5f5` | 3.2:1 | ä¸æ»¡è¶³ï¼ˆä»…ä½œä¸ºæç¤ºï¼‰ |

### 6.2 ç„¦ç‚¹ç®¡ç†

#### 6.2.1 ç„¦ç‚¹æŒ‡ç¤ºå™¨

```css
/* ç¡®ä¿æ‰€æœ‰å¯äº¤äº’å…ƒç´ æœ‰æ¸…æ™°çš„ç„¦ç‚¹æ ·å¼ */
textarea:focus,
button:focus,
input:focus {
  outline: 2px solid #007aff;
  outline-offset: 2px;
}

/* é«˜å¯¹æ¯”åº¦æ¨¡å¼ */
@media (prefers-contrast: high) {
  textarea:focus,
  button:focus {
    outline: 3px solid currentColor;
    outline-offset: 3px;
}
```

#### 6.2.2 ç„¦ç‚¹é¡ºåº

```
1. è¾“å…¥æ¡† (ä¸»è¦äº¤äº’åŒºåŸŸ)
2. å‘é€æŒ‰é’®
3. æ¸…ç©ºå¯¹è¯æŒ‰é’®
4. é”™è¯¯æç¤ºå…³é—­æŒ‰é’®
5. æ€è€ƒæ—¥å¿—æŠ˜å æŒ‰é’®ï¼ˆå¦‚æœå¯è§ï¼‰
```

### 6.3 é”®ç›˜å¯¼èˆª

#### 6.3.1 Tab é”®å¯¼èˆª

- æ‰€æœ‰å¯äº¤äº’å…ƒç´ å¿…é¡»å¯ä»¥é€šè¿‡ Tab é”®è®¿é—®
- ç„¦ç‚¹é¡ºåºéµå¾ªè§†è§‰å¸ƒå±€ä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³
- æ€è€ƒæ—¥å¿—åŒºåŸŸä½¿ç”¨ `tabindex="0"` ä½¿å…¶å¯èšç„¦

#### 6.3.2 å¿«æ·é”®æ”¯æŒ

| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| Enter | å‘é€æ¶ˆæ¯ |
| Escape | å…³é—­æ¨¡æ€æ¡†/é”™è¯¯æç¤º |
| Ctrl + Enter | å¼ºåˆ¶æ¢è¡Œ |

### 6.4 å±å¹•é˜…è¯»å™¨æ”¯æŒ

#### 6.4.1 ARIA å±æ€§

```vue
<!-- æ¶ˆæ¯åˆ—è¡¨ -->
<div
  class="message-list"
  role="log"
  aria-live="polite"
  aria-label="èŠå¤©æ¶ˆæ¯åˆ—è¡¨"
>
  ...
</div>

<!-- çŠ¶æ€æŒ‡ç¤ºå™¨ -->
<div
  class="status"
  role="status"
  :aria-label="getStatusText()"
>
  <span class="status-dot" aria-hidden="true"></span>
  {{ getStatusText() }}
</div>

<!-- æ€è€ƒåŒºåŸŸ -->
<div
  class="thinking-area"
  role="region"
  aria-label="AI æ€è€ƒè¿‡ç¨‹"
>
  <div class="thinking-header" aria-level="3">
    <span aria-hidden="true">ğŸ§ </span>
    <span>æ€è€ƒè¿‡ç¨‹</span>
    <span class="log-count">({{ msg.thinkingLog.length }} æ¡)</span>
  </div>
  ...
</div>

<!-- å‘é€æŒ‰é’® -->
<button
  class="send-btn"
  :aria-label="state.isStreaming ? 'åœæ­¢å“åº”' : 'å‘é€æ¶ˆæ¯'"
  :aria-disabled="!canSend"
>
  <span aria-hidden="true">{{ state.isStreaming ? 'â¹' : 'â¤' }}</span>
</button>
```

#### 6.4.2 åŠ¨æ€å†…å®¹é€šçŸ¥

```typescript
// å½“æ–°æ¶ˆæ¯æ·»åŠ æ—¶ï¼Œä½¿ç”¨ aria-live åŒºåŸŸé€šçŸ¥å±å¹•é˜…è¯»å™¨
watch(() => props.messages.length, (newLen, oldLen) => {
  if (newLen > oldLen) {
    // æ–°æ¶ˆæ¯æ·»åŠ ï¼Œå±å¹•é˜…è¯»å™¨å°†è‡ªåŠ¨è¯»å–
  }
});
```

### 6.5 å‡å°‘åŠ¨ç”»

```css
/* å°Šé‡ç”¨æˆ·å‡å°‘åŠ¨ç”»çš„åå¥½ */
@media (prefers-reduced-motion: reduce) {
  .typing-indicator .dot {
    animation: none;
  }

  .status-dot {
    animation: none;
  }

  .thinking-collapsed summary::before {
    transition: none;
  }

  * {
    transition-duration: 0.01ms !important;
    animation-duration: 0.01ms !important;
  }
}
```

### 6.6 é¢œè‰²æ— éšœç¢

```css
/* ä¸è¦ä»…ä¾é é¢œè‰²ä¼ è¾¾ä¿¡æ¯ */
.log-event {
  color: #89b4fa;
  font-weight: 500;  /* é¢å¤–ä½¿ç”¨å­—é‡åŒºåˆ† */
}

/* ä¸ºè‰²ç›²ç”¨æˆ·æä¾›é¢å¤–è§†è§‰æç¤º */
.log-event::before {
  content: 'â— ';
  color: #89b4fa;
}
```

### 6.7 è¾“å…¥éªŒè¯

```vue
<template>
  <textarea
    v-model="inputMessage"
    :disabled="state.isLoading || state.isStreaming"
    placeholder="è¾“å…¥æ¶ˆæ¯..."
    aria-required="true"
    :aria-invalid="!isValid"
    :aria-describedby="isValid ? null : 'input-error'"
  ></textarea>

  <div
    v-if="!isValid"
    id="input-error"
    role="alert"
    class="error-message"
  >
    æ¶ˆæ¯ä¸èƒ½ä¸ºç©º
  </div>
</template>
```

---

## 7. é™„å½•

### 7.1 ç»„ä»¶ Props æ¥å£å®šä¹‰

```typescript
// ChatWindow.vue
interface ChatWindowProps {
  baseUrl?: string;
  title?: string;
  showDebugLog?: boolean;
}

// MessageList.vue
interface MessageListProps {
  messages: Message[];
}

// ChatInput.vue
interface ChatInputProps {
  state: ChatState;
}

// MessageItem.vue
interface MessageItemProps {
  message: Message;
}
```

### 7.2 ç»„ä»¶äº‹ä»¶æ¥å£

```typescript
// ChatWindow Emits
interface ChatWindowEmits {
  (e: 'clear'): void;
  (e: 'error', message: string): void;
}

// ChatInput Emits
interface ChatInputEmits {
  (e: 'send', message: string): void;
}
```

### 7.3 çŠ¶æ€å¸¸é‡

```typescript
const CHAT_STATE = {
  IDLE: 'idle',
  LOADING: 'loading',
  STREAMING: 'streaming',
  THINKING: 'thinking',
  COMPLETE: 'complete',
  ERROR: 'error',
} as const;

const EVENT_TYPES = {
  CONTENT: 'content',
  THINKING: 'thinking',
  TOOL_CALL: 'tool_call',
  TOOL_RESULT: 'tool_result',
  TOOL_ERROR: 'tool_error',
  DONE: 'done',
  ERROR: 'error',
} as const;
```

### 7.4 æ ·å¼å˜é‡å‚è€ƒ

```css
:root {
  /* é¢œè‰²å˜é‡ */
  --color-user-bg: #007aff;
  --color-user-text: #ffffff;
  --color-ai-bg: #f0f0f0;
  --color-ai-text: #333333;
  --color-thinking-bg: #1e1e2e;
  --color-thinking-text: #a6accd;
  --color-event-type: #89b4fa;
  --color-timestamp: #6c7086;
  --color-error: #ff4444;

  /* é—´è·å˜é‡ */
  --spacing-xs: 4px;
  --spacing-sm: 6px;
  --spacing-md: 8px;
  --spacing-lg: 12px;
  --spacing-xl: 16px;

  /* åœ†è§’å˜é‡ */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-full: 50%;

  /* å­—å·å˜é‡ */
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-md: 13px;
  --font-size-lg: 14px;
  --font-size-xl: 16px;
  --font-size-2xl: 18px;
}
```

### 7.5 æµè§ˆå™¨å…¼å®¹æ€§

| æµè§ˆå™¨ | æœ€ä½ç‰ˆæœ¬ | å¤‡æ³¨ |
|--------|----------|------|
| Chrome | 90+ | æ”¯æŒæ‰€æœ‰ç‰¹æ€§ |
| Firefox | 88+ | æ”¯æŒæ‰€æœ‰ç‰¹æ€§ |
| Safari | 14+ | æ”¯æŒæ‰€æœ‰ç‰¹æ€§ |
| Edge | 90+ | æ”¯æŒæ‰€æœ‰ç‰¹æ€§ |

### 7.6 ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è·¯å¾„ |
|------|------|
| API æ¥å£æ–‡æ¡£ | `/docs/frontend-integration/vue-chat-integration.md` |
| åç«¯ API æ–‡æ¡£ | `llm-cli-v3/backend/README.md` |
| éƒ¨ç½²æŒ‡å— | é¡¹ç›®æ ¹ç›®å½• `README.md` |

---

*æ–‡æ¡£æ›´æ–°æ—¶é—´: 2026-02-03*
